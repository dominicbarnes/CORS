(function(e){"use strict";function u(e){var t,n=[];for(t in e){if(e.hasOwnProperty(t)){n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]))}}return n.join("&")}function a(e){this.init(e)}var t=e,n=function(){var e;if(t.XMLHttpRequest&&"withCredentials"in new t.XMLHttpRequest){e=t.XMLHttpRequest}else if(t.XDomainRequest){e=t.XDomainRequest}return e}(),r=["head","get","post","put","delete"],i=0,s=r.length,o={};a.prototype.init=function(e){var t=this;t.xhr=new n;t.method=e.method;t.url=e.url;t.success=e.success;t.error=e.error;t.params=u(e.params);t.headers=e.headers;if(e.credentials===true){t.xhr.withCredentials=true}t.send();return t};a.prototype.send=function(){var e=this;if(e.success!==undefined){e.xhr.onload=function(){e.success.call(this,this.responseText)}}if(e.error!==undefined){e.xhr.error=function(){e.error.call(this,this.responseText)}}e.xhr.open(e.method,e.url,true);if(e.headers!==undefined){e.setHeaders()}e.xhr.send(e.params);return e};a.prototype.setHeaders=function(){var e=this,t=e.headers,n;for(n in t){if(t.hasOwnProperty(n)){e.xhr.setRequestHeader(n,t[n])}}return e};for(i;i<s;i+=1){(function(){var e=r[i];o[e]=function(t,n){var r={};if(t===undefined){throw new Error("CORS: url must be defined")}if(typeof t==="object"){r=t}else{if(typeof n==="function"){r.success=n}r.url=t}r.method=e.toUpperCase();return(new a(r)).xhr}})()}if(typeof e.define==="function"&&e.define.amd!==undefined){e.define("cors",[],function(){return o})}else if(typeof module!=="undefined"&&module.exports!==undefined){module.exports=o}else{e.cors=o}})(this)